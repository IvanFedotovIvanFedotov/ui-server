(rule
 (targets components.min.css)
 (deps
       (:src ./@material/components/components.scss)
       (source_tree ./@material))
 (action (progn
          (run %{bin:sassc} -t compressed -I ./ %{src} %{targets})
          (run %{bin:postcss} -u autoprefixer -r %{targets}))))

(rule
 (targets page-input.min.css)
 (deps
       (:src ./frontend/input/input.scss)
       (source_tree ./frontend/input/)
       (source_tree ./@material))
 (action (progn
          (run %{bin:sassc} -t compressed -I ./ %{src} %{targets})
          (run %{bin:postcss} -u autoprefixer -r %{targets}))))

(rule
 (targets page-mosaic-editor.min.css)
 (deps
       (:src ./frontend/mosaic_editor/mosaic_editor.scss)
       (source_tree ./frontend/mosaic_editor/)
       (source_tree ./@material))
 (action (progn
          (run %{bin:sassc} -t compressed -I ./ %{src} %{targets})
          (run %{bin:postcss} -u autoprefixer -r %{targets}))))

(rule
 (targets page-mosaic-video.min.css)
 (deps
       (:src ./frontend/mosaic_video/mosaic_video.scss)
       (source_tree ./frontend/mosaic_video/)
       (source_tree ./@material))
 (action (progn
          (run %{bin:sassc} -t compressed -I ./ %{src} %{targets})
          (run %{bin:postcss} -u autoprefixer -r %{targets}))))

(rule
 (targets page-topology.min.css)
 (deps
       (:src ./frontend/topology/topology.scss)
       (source_tree ./frontend)
       (source_tree ./@material))
 (action (progn
          (run %{bin:sassc} -t compressed -I ./ %{src} %{targets})
          (run %{bin:postcss} -u autoprefixer -r %{targets}))))

(rule
 (targets page-network-settings.min.css)
 (deps
       (:src ./frontend/network-settings/network-settings.scss)
       (source_tree ./frontend/network-settings)
       (source_tree ./@material))
 (action (progn
          (run %{bin:sassc} -t compressed -I ./ %{src} %{targets})
          (run %{bin:postcss} -u autoprefixer -r %{targets}))))

(rule
 (targets page-server-settings.min.css)
 (deps
       (:src ./frontend/server-settings/server-settings.scss)
       (source_tree ./frontend/server-settings)
       (source_tree ./@material))
 (action (progn
          (run %{bin:sassc} -t compressed -I ./ %{src} %{targets})
          (run %{bin:postcss} -u autoprefixer -r %{targets}))))

(rule
 (targets page-user-settings.min.css)
 (deps
       (:src ./frontend/user-settings/user-settings.scss)
       (source_tree ./frontend/user-settings)
       (source_tree ./@material))
 (action (progn
          (run %{bin:sassc} -t compressed -I ./ %{src} %{targets})
          (run %{bin:postcss} -u autoprefixer -r %{targets}))))

(rule
 (targets page-error.min.css)
 (deps
       (:src ./frontend/error/page-error.scss)
       (source_tree ./@material))
 (action (progn
          (run %{bin:sassc} -t compressed -I ./ %{src} %{targets})
          (run %{bin:postcss} -u autoprefixer -r %{targets}))))

(rule
 (targets page-logout.min.css)
 (deps
       (:src ./frontend/logout/page-logout.scss)
       (source_tree ./@material))
 (action (progn
          (run %{bin:sassc} -t compressed -I ./ %{src} %{targets})
          (run %{bin:postcss} -u autoprefixer -r %{targets}))))

;; Boards

(rule
 (targets board-niitv-dvb4ch.min.css)
 (deps
       (:src ./frontend/boards/niitv-dvb4ch/niitv-dvb4ch.scss)
       (source_tree ./@material))
 (action (progn
          (run %{bin:sassc} -t compressed -I ./ %{src} %{targets})
          (run %{bin:postcss} -u autoprefixer -r %{targets}))))

(rule
 (targets board-niitv-dvb4ch-page-input.min.css)
 (deps
       (:src ./frontend/boards/niitv-dvb4ch/input/input.scss)
       (source_tree ./@material))
 (action (progn
          (run %{bin:sassc} -t compressed -I ./ %{src} %{targets})
          (run %{bin:postcss} -u autoprefixer -r %{targets}))))

;; Main

(rule
 (targets main.min.css)
 (deps
       (:src ./main.scss)
       (source_tree ./templates)
       (source_tree ./@material))
 (action (progn
          (run %{bin:sassc} -t compressed -I ./ %{src} %{targets})
          (run %{bin:postcss} -u autoprefixer -r %{targets}))))

(install
  (files (normalize.css as css/normalize.css)
         (Chart.min.css as css/Chart.min.css)
         (components.min.css as css/components.min.css)
         (main.min.css as css/main.min.css)
         (page-input.min.css as css/page-input.min.css)
         (page-mosaic-editor.min.css as css/page-mosaic-editor.min.css)
         (page-mosaic-video.min.css as css/page-mosaic-video.min.css)
         (page-topology.min.css as css/page-topology.min.css)
         (page-network-settings.min.css as css/page-network-settings.min.css)
         (page-server-settings.min.css as css/page-server-settings.min.css)
         (page-user-settings.min.css as css/page-user-settings.min.css)
         (page-error.min.css as css/page-error.min.css)
         (page-logout.min.css as css/page-logout.min.css)
         (board-niitv-dvb4ch.min.css as css/board-niitv-dvb4ch.min.css)
         (board-niitv-dvb4ch-page-input.min.css as css/board-niitv-dvb4ch-page-input.min.css))
  (section share)
  (package ui-server))